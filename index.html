<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Pricing Analysis Tool</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tabulator-tables@5.5.0/dist/css/tabulator.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <style>
      /* Basic spinner for loading indicator */
      .spinner {
        border: 4px solid rgba(0, 0, 0, 0.1);
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border-left-color: #09f;
        animation: spin 1s ease infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>Mortgage Brain Pricing Analysis</h1>
            <div id="date-range-display"></div>
            <div id="loading-indicator" class="hidden">
                <div class="spinner"></div>
                <span>Loading data...</span>
            </div>
        </header>
        
        <main id="app-content" class="hidden">
            <div class="controls-section">
                <div id="filters-container"> 
                  <div id="filters-panel">
                      <!-- FilterPanel.js will dynamically render ALL content here, including the apply button -->
                  </div>
                </div>
                <div id="premium-band-selector" class="hidden"></div>
            </div>
            
            <div class="views-section">
                <div class="view-tabs">
                    <button class="view-tab active" data-view="data-table">Data Table</button>
                    <button class="view-tab" data-view="market-share">Market Share</button>
                    <button class="view-tab" data-view="heatmap">Heatmap</button>
                    <button class="view-tab" data-view="trends">Trends</button>
                </div>
                
                <div class="view-content">
                    <div id="data-table-view" class="view-panel active"></div>
                    <div id="market-share-view" class="view-panel hidden"></div>
                    <div id="heatmap-view" class="view-panel hidden"></div>
                    <div id="trends-view" class="view-panel hidden"></div>
                </div>
            </div>
            
            <div class="actions-section">
                <button id="export-data" class="btn btn-primary">Export Data</button>
            </div>
        </main>
    </div>
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tabulator-tables@5.5.0/dist/js/tabulator.min.js"></script>
    
    <!-- Application Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
